---
import AppLayout from '@/layouts/AppLayout.astro';
import {
  Wallet,
  Building2,
  TrendingUp,
  Bitcoin,
  PiggyBank,
  Package,
  Briefcase,
  ArrowRight
} from 'lucide-react';
import { getSession } from '@/lib/auth/session';

const session = await getSession(Astro);

// Redirect to login if not authenticated
if (!session) {
  return Astro.redirect('/auth/login');
}

const accountTypes = [
  {
    name: 'Bank Account',
    description: 'Checking, savings, and other cash accounts',
    href: '/accounts/bank',
    icon: 'Wallet',
    hex: '#6ba3a0',
  },
  {
    name: 'Real Estate',
    description: 'Properties, land, and real estate investments',
    href: '/accounts/real-estate',
    icon: 'Building2',
    hex: '#9b85a8',
  },
  {
    name: 'Stocks & ETFs',
    description: 'Stock holdings and exchange-traded funds',
    href: '/accounts/stocks',
    icon: 'TrendingUp',
    hex: '#7e82b0',
  },
  {
    name: 'Cryptocurrency',
    description: 'Bitcoin, Ethereum, and other digital assets',
    href: '/accounts/crypto',
    icon: 'Bitcoin',
    hex: '#c4a35a',
  },
  {
    name: 'Superannuation',
    description: 'Retirement and pension accounts',
    href: '/accounts/superannuation',
    icon: 'PiggyBank',
    hex: '#5f8563',
  },
  {
    name: 'Personal Assets',
    description: 'Vehicles, jewelry, collectibles, and valuables',
    href: '/accounts/personal-assets',
    icon: 'Package',
    hex: '#b07880',
  },
  {
    name: 'Business Assets',
    description: 'Business equity, equipment, and inventory',
    href: '/accounts/business-assets',
    icon: 'Briefcase',
    hex: '#a07eb0',
  },
];
---

<AppLayout title="Add Asset">
  <div class="space-y-16">
    <div class="text-center">
      <p class="section-label mb-3">NEW ACCOUNT</p>
      <h1 class="page-title">Add Asset</h1>
      <p class="mt-4 text-[15px] text-[var(--color-text-secondary)]">Choose the type of asset you want to track.</p>
    </div>

    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      {accountTypes.map((type) => (
        <a
          href={type.href}
          class="group flex flex-col rounded-xl border border-border-subtle bg-bg-surface p-5 hover:border-primary-500/50 hover:bg-bg-surface/80 transition-colors"
        >
          <div class="w-12 h-12 rounded-lg flex items-center justify-center mb-4" style={`background-color: ${type.hex}15; color: ${type.hex}`}>
            {type.icon === 'Wallet' && <Wallet className="h-6 w-6" />}
            {type.icon === 'Building2' && <Building2 className="h-6 w-6" />}
            {type.icon === 'TrendingUp' && <TrendingUp className="h-6 w-6" />}
            {type.icon === 'Bitcoin' && <Bitcoin className="h-6 w-6" />}
            {type.icon === 'PiggyBank' && <PiggyBank className="h-6 w-6" />}
            {type.icon === 'Package' && <Package className="h-6 w-6" />}
            {type.icon === 'Briefcase' && <Briefcase className="h-6 w-6" />}
          </div>
          <h3 class="text-lg font-semibold text-text-primary group-hover:text-primary-500 transition-colors">
            {type.name}
          </h3>
          <p class="mt-1 text-sm text-text-muted flex-1">
            {type.description}
          </p>
          <div class="mt-4 flex items-center text-sm font-medium text-primary-500 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity">
            Add {type.name.toLowerCase()}
            <ArrowRight className="ml-1 h-4 w-4" />
          </div>
        </a>
      ))}
    </div>
  </div>
</AppLayout>
